{% cache 'annonce_' ~ annonce.id %}
<div class="listing-homepage">
    <div class="item-grid__image-container style-hover-zoom clearfix">
        <a href="{{ path('annonce_details', { 'label' : annonce.label|slugify, 'id' : annonce.id }) }}">
            <picture>
                <source data-srcset="{{ asset('uploads/photos/263x175/webp/' ~ annonce.photo ~ '.webp') }}" type="image/webp">
                <img src="{{ asset('asset/images/lg.gif') }}" data-src="{{ asset('uploads/photos/263x175/' ~ annonce.photo) }}" alt="Image annonce" width="263" height="175" class="delayed-load">
            </picture>
        </a>
    </div><!-- .item-grid__image-container -->
    <div class="absolute">
        <ul class="property-status">
            <li class="property-status-item property-status-rent"><span>{{annonce.offre}}</span></li>
        </ul>            
        <div class="property-group-label"><span class="label-featured label label-success">{{annonce.kind}}</span></div>
    </div>
    <div class="item-grid__content-container">
        <div class="listing__content">
            {% if app.user %}
                <div class="favorite-btn" style="position:absolute;top:10px;right:10px;z-index:2;">
                    <button class="favorite-toggle-btn" data-id="{{ annonce.id }}" style="background:transparent;border:none;cursor:pointer;">
                        {% set isFavorite = annonce.isFavorite is defined and annonce.isFavorite %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="{{ isFavorite ? '#e74c3c' : 'none' }}" stroke="#e74c3c" stroke-width="2" viewBox="0 0 24 24">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                    </button>
                </div>
            {% endif %}
            <div class="listing__header">
                <div class="listing__header-primary">
                    <div>
                        <h3 class="listing__title  h-70"><a href="{{ path('annonce_details', { 'label' : annonce.label|slugify, 'id' : annonce.id }) }}">{{annonce.label| slice(0, 49) | capitalize}} {{ (annonce.label| length) > 49 ? '...' }}</a></h3>
                    </div>
                    <span class="listing__type"><a href="{{ path('annonce_liste_delegation', {'slug': annonce.delegation|slugify , 'page': '1' }) }}">{{annonce.delegation}}</a></span>
                    <div class="property-price">
                        <p class="listing__price"> 
                            {% if(annonce.prix != 0) %}
                                {{annonce.prix|number_format(0, '.', ' ')}} DT
                                {% if annonce.instalment is defined %}
                                    {% if annonce.instalment == 'j' %}
                                        / Jour
                                    {% elseif annonce.instalment == 's' %}
                                        / Semaine
                                    {% elseif annonce.instalment == 'm' %}
                                        / Mois
                                    {% elseif annonce.instalment == 'a' %}   
                                        / Année
                                    {% endif %}
                                {% endif %}
                            {% else %}
                                Contacter le propriétaire
                            {%endif%}
                        </p>
                    </div>
                </div><!-- .listing__header-primary -->
            </div><!-- .listing__header -->
            <div class="flex-center space-beetween pb12 list-details">
                <div class="clearfix">
                    <div class="property-meta">
                        <ul class="property-meta-list list-inline">
                            {% if(annonce.pieces is not null ) %}<li class="property-label-bedrooms" data-toggle="tooltip" data-placement="top" title="" data-original-title="Pièces"><i class="icon-property-bedrooms"></i> <span class="label-content">{{annonce.pieces}} pièce{% if annonce.pieces > 1 %}s{% endif %}</span></li>{%endif%}
                            {% if(annonce.surface != 0) %}<li class="property-label-areasize" data-toggle="tooltip" data-placement="top" title="" data-original-title="Surface"><i class="icon-property-areasize"></i> <span class="label-content">{{annonce.surface}} m2</span></li>{%endif%}
                        </ul>
                    </div>
                </div>
                {% if(annonce.userAgence  != NULL) %}
                    <a href="{{ path('liste_agence', {'label': annonce.userAgence|slugify, 'id': annonce.userId, 'page': 1} )  }} ">
                        {% if(annonce.userLogo  != NULL) %}
                            <div itemscope itemtype="https://schema.org/Organization">
                                <img src="{{ asset('uploads/logos/' ~ annonce.userLogo) }}" alt="{{ annonce.userAgence }}" loading="lazy" width="50" height="50" itemprop="logo" style="width: 50px; height: 50px; object-fit: contain;">
                            </div>
                        {% else %}
                            <div class="avatar50">{{ annonce.userAgence }}</div>
                        {% endif %}
                    </a>    
                {% endif %}        
            </div>
        </div><!-- .listing-content -->
    </div><!-- .item-grid__content-container -->
</div><!-- .listing -->
{% endcache %}
